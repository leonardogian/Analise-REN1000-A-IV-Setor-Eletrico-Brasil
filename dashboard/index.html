<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard ‚Äî An√°lise REN 1000/2021 ANEEL</title>
  <meta name="description"
    content="Dashboard interativo para an√°lise de efic√°cia da Resolu√ß√£o Normativa ANEEL n¬∫ 1.000/2021 na qualidade comercial das distribuidoras de energia." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>

  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <div class="bg-grid"></div>

  <div class="app-wrapper">

    <!-- ==================== HEADER ==================== -->
    <header class="header">
      <div class="header-content">
        <div>
          <h1>‚ö° An√°lise REN 1000/2021 ‚Äî ANEEL</h1>
          <p class="header-subtitle">Qualidade comercial das distribuidoras de energia ‚Äî Prazos, transgress√µes e
            compensa√ß√µes</p>
        </div>
        <span class="header-badge">
          <span class="dot"></span>
          Atualizado: <span id="gen-time">‚Äî</span>
        </span>
      </div>
    </header>

    <!-- ==================== LOADING ==================== -->
    <div id="loading" class="loading-screen">
      <div class="loading-spinner"></div>
      <p class="loading-text">Carregando dados...</p>
    </div>

    <!-- ==================== DASHBOARD CONTENT ==================== -->
    <div id="dashboard-content" class="dashboard-content">

      <!-- Navigation -->
      <nav class="nav-tabs">
        <button class="nav-tab active" data-tab="tab-overview">
          <span class="tab-icon">üìä</span> Vis√£o Geral
        </button>
        <button class="nav-tab" data-tab="tab-neoenergia">
          <span class="tab-icon">üè¢</span> Grupos Econ√¥micos
        </button>
        <button class="nav-tab" data-tab="tab-regulatory">
          <span class="tab-icon">üìà</span> An√°lise Regulat√≥ria
        </button>
        <button class="nav-tab" data-tab="tab-diagnostico">
          <span class="tab-icon">üîç</span> Diagn√≥stico Detalhado
        </button>
        <a href="relatorio.html" class="nav-tab nav-tab-link">
          <span class="tab-icon">üìÑ</span> Relat√≥rio
        </a>
        <button class="theme-toggle-btn" id="theme-toggle" onclick="toggleTheme()" title="Alternar Tema">
          <span class="icon">üåô</span>
        </button>
      </nav>

      <!-- ============ TAB 1: VIS√ÉO GERAL ============ -->
      <section id="tab-overview" class="tab-panel active">

        <h2 class="section-title"><span class="icon">üìä</span> Impacto da REN 1000 ‚Äî Pr√© vs P√≥s 2022</h2>
        <p class="section-description">
          Compara√ß√£o dos indicadores de qualidade comercial antes e depois da vig√™ncia da
          Resolu√ß√£o Normativa ANEEL n¬∫ 1.000/2021, que consolidou as regras de distribui√ß√£o de energia.
        </p>

        <!-- KPI Row -->
        <div class="kpi-grid">
          <div class="kpi-card blue">
            <div class="kpi-label">Taxa Fora do Prazo (Pr√©-2022)</div>
            <div class="kpi-value blue" id="kpi-taxa-pre">‚Äî</div>
            <div class="kpi-label kpi-note">M√©dia anual (REN 414)</div>
          </div>
          <div class="kpi-card cyan">
            <div class="kpi-label">Taxa Fora do Prazo (P√≥s-2022)</div>
            <div class="kpi-value cyan" id="kpi-taxa-pos">‚Äî</div>
            <div id="kpi-taxa-delta" class="kpi-delta">‚Äî</div>
          </div>
          <div class="kpi-card amber">
            <div class="kpi-label">Compensa√ß√£o Total (Pr√©-2022)</div>
            <div class="kpi-value amber" id="kpi-comp-pre">‚Äî</div>
            <div class="kpi-label kpi-note">2011‚Äì2021</div>
          </div>
          <div class="kpi-card green">
            <div class="kpi-label">Compensa√ß√£o Total (P√≥s-2022)</div>
            <div class="kpi-value green" id="kpi-comp-pos">‚Äî</div>
            <div id="kpi-comp-delta" class="kpi-delta">‚Äî</div>
          </div>
          <div class="kpi-card purple">
            <div class="kpi-label">Total de Servi√ßos Analisados</div>
            <div class="kpi-value purple" id="kpi-serv-total">‚Äî</div>
            <div class="kpi-label kpi-note">2011‚Äì2023</div>
          </div>
          <div class="kpi-card red">
            <div class="kpi-label">Total Fora do Prazo</div>
            <div class="kpi-value red" id="kpi-fora-total">‚Äî</div>
            <div class="kpi-label kpi-note">Transgress√µes acumuladas</div>
          </div>
        </div>

        <!-- Insights -->
        <div class="insight-grid">
          <div class="insight-card">
            <span class="insight-icon">üìâ</span>
            <div class="insight-text">
              A <strong>taxa de transgress√µes caiu</strong> ap√≥s a REN 1000, indicando melhoria na presta√ß√£o dos
              servi√ßos
              comerciais dentro do prazo regulamentar.
            </div>
          </div>
          <div class="insight-card">
            <span class="insight-icon">üí∞</span>
            <div class="insight-text">
              A <strong>compensa√ß√£o financeira tamb√©m diminuiu</strong>, mas √© preciso observar que os anos p√≥s-2022
              ainda est√£o em consolida√ß√£o.
            </div>
          </div>
        </div>

        <!-- Charts -->
        <div class="chart-grid two-col">
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Taxa Fora do Prazo ‚Äî S√©rie Anual</div>
                <div class="chart-subtitle">Linha tracejada marca a vig√™ncia da REN 1000 (2022)</div>
              </div>
              <span class="chart-tag">2011‚Äì2023</span>
            </div>
            <div class="chart-canvas-wrapper">
              <canvas id="chart-serie-taxa"></canvas>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Compensa√ß√µes Financeiras ‚Äî S√©rie Anual</div>
                <div class="chart-subtitle">Valor total pago em compensa√ß√µes aos consumidores</div>
              </div>
              <span class="chart-tag">R$</span>
            </div>
            <div class="chart-canvas-wrapper">
              <canvas id="chart-serie-comp"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- ============ TAB 2: NEOENERGIA ============ -->
      <section id="tab-neoenergia" class="tab-panel">

        <div class="group-selector-row">
          <label class="group-selector-label" for="group-selector">Grupo econ√¥mico:</label>
          <select id="group-selector" class="group-selector"></select>
        </div>

        <h2 class="section-title">
          <span class="icon">üè¢</span>
          Benchmark <span id="group-title-main">Grupo</span> ‚Äî
          <span id="group-count-main">0</span> Distribuidoras
        </h2>
        <p class="section-description">
          An√°lise comparativa do <span id="group-label-desc">grupo selecionado</span>.
          M√©tricas normalizadas por unidades consumidoras (UC) para compara√ß√£o justa por porte das distribuidoras.
        </p>

        <div class="chart-grid two-col">
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Transgress√µes por 100k UC-m√™s</div>
                <div class="chart-subtitle">Normalizado pelo porte da distribuidora</div>
              </div>
              <span class="chart-tag" id="group-period-tag">2023‚Äì2025</span>
            </div>
            <div class="chart-canvas-wrapper">
              <canvas id="chart-neo-fora"></canvas>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Compensa√ß√£o R$ por UC-m√™s</div>
                <div class="chart-subtitle">Impacto financeiro normalizado</div>
              </div>
              <span class="chart-tag">R$ / UC</span>
            </div>
            <div class="chart-canvas-wrapper">
              <canvas id="chart-neo-comp"></canvas>
            </div>
          </div>
        </div>

        <div class="chart-grid two-col">
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Radar de Benchmark ‚Äî √öltimo Ano</div>
                <div class="chart-subtitle">Compara√ß√£o multidimensional ‚Äî valores em escala relativa</div>
              </div>
              <span class="chart-tag">2025</span>
            </div>
            <div class="chart-canvas-wrapper chart-canvas-wrapper-tall">
              <canvas id="chart-neo-radar"></canvas>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Tend√™ncia 2023 ‚Üí 2025</div>
                <div class="chart-subtitle">Varia√ß√£o percentual entre os per√≠odos</div>
              </div>
            </div>
            <div class="data-table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Distribuidora</th>
                    <th>Fora/100k UC 2023</th>
                    <th>Fora/100k UC 2025</th>
                    <th>Varia√ß√£o</th>
                    <th>Taxa 2023</th>
                    <th>Taxa 2025</th>
                  </tr>
                </thead>
                <tbody id="trend-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- ============ TAB 3: AN√ÅLISE REGULAT√ìRIA ============ -->
      <section id="tab-regulatory" class="tab-panel">

        <h2 class="section-title">
          <span class="icon">üìà</span>
          An√°lise Regulat√≥ria Mensal ‚Äî <span id="group-title-reg">Grupo</span>
        </h2>
        <p class="section-description">
          S√©rie temporal mensal das distribuidoras do <span id="group-label-reg">grupo selecionado</span>,
          com taxa de transgress√£o e compensa√ß√£o financeira.
          Permite identificar sazonalidade e tend√™ncias de curto prazo.
        </p>

        <div class="chart-grid">
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Taxa Fora do Prazo ‚Äî Mensal</div>
                <div class="chart-subtitle">Evolu√ß√£o mensal por distribuidora (2023‚Äì2025)</div>
              </div>
              <span class="chart-tag">Mensal</span>
            </div>
            <div class="chart-canvas-wrapper chart-canvas-wrapper-tall">
              <canvas id="chart-reg-mensal"></canvas>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Compensa√ß√£o Financeira ‚Äî Mensal (Empilhado)</div>
                <div class="chart-subtitle">Volume financeiro por distribuidora ao longo do tempo</div>
              </div>
              <span class="chart-tag">R$ / m√™s</span>
            </div>
            <div class="chart-canvas-wrapper chart-canvas-wrapper-tall">
              <canvas id="chart-reg-comp-mensal"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- ============ TAB 4: DIAGN√ìSTICO DETALHADO ============ -->
      <section id="tab-diagnostico" class="tab-panel">

        <h2 class="section-title"><span class="icon">üîç</span> Diagn√≥stico Detalhado</h2>
        <p class="section-description">
          An√°lise por classe de consumo (urbana, rural, grupo A) e s√©rie longa 2011‚Äì2023
          para cada distribuidora do <span id="group-label-diag">grupo selecionado</span>.
        </p>

        <!-- Donuts -->
        <h3 class="subsection-title">
          üìä Distribui√ß√£o das Transgress√µes por Classe/Localiza√ß√£o (2023‚Äì2025)
        </h3>
        <div id="diagnostico-donuts" class="chart-grid chart-grid-compact"></div>

        <!-- Serie longa -->
        <div class="chart-grid two-col section-spacing-top">
          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">S√©rie Longa 2011 ‚Üí 2023</div>
                <div class="chart-subtitle">Evolu√ß√£o da taxa fora do prazo por distribuidora</div>
              </div>
              <span class="chart-tag">12 anos</span>
            </div>
            <div class="chart-canvas-wrapper">
              <canvas id="chart-longa-bar"></canvas>
            </div>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div>
                <div class="chart-title">Resumo da S√©rie Longa</div>
                <div class="chart-subtitle">Varia√ß√£o da taxa fora do prazo entre 2011 e 2023</div>
              </div>
            </div>
            <div class="data-table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Distribuidora</th>
                    <th>Ano In√≠cio</th>
                    <th>Ano Fim</th>
                    <th>Taxa In√≠cio</th>
                    <th>Taxa Fim</th>
                    <th>Varia√ß√£o</th>
                  </tr>
                </thead>
                <tbody id="longa-table-body"></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Insights -->
        <div class="insight-grid section-spacing-top-sm">
          <div class="insight-card">
            <span class="insight-icon">üèÜ</span>
            <div class="insight-text" id="diag-insight-best">‚Äî</div>
          </div>
          <div class="insight-card">
            <span class="insight-icon">‚ö†Ô∏è</span>
            <div class="insight-text" id="diag-insight-worst">‚Äî</div>
          </div>
          <div class="insight-card">
            <span class="insight-icon">üìâ</span>
            <div class="insight-text" id="diag-insight-trend">‚Äî</div>
          </div>
        </div>
      </section>

    </div><!-- /dashboard-content -->

    <!-- ==================== FOOTER ==================== -->
    <footer class="footer">
      <p>
        TCC ‚Äî An√°lise de Efic√°cia da REN 1000/2021 (ANEEL) &middot;
        Dados: <a href="https://dadosabertos.aneel.gov.br" target="_blank">dadosabertos.aneel.gov.br</a> &middot;
        Gerado automaticamente a partir dos dados processados
      </p>
    </footer>

  </div><!-- /app-wrapper -->

  <script src="app.js"></script>
</body>

</html>
